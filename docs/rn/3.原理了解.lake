<!doctype lake><meta name="doc-version" content="1" /><meta name="viewport" content="adapt" /><p data-lake-id="ub1d2d659" id="ub1d2d659"><span data-lake-id="uc13876d3" id="uc13876d3">react 的视图层全是native渲染的，而非webview。</span></p><p data-lake-id="ubf4dbb53" id="ubf4dbb53"><span data-lake-id="u25f02959" id="u25f02959">样式上采用css的flex布局，经Yoga转成Native可识别的方式。</span></p><p data-lake-id="u05a565dc" id="u05a565dc"><br></p><p data-lake-id="ubc6eb859" id="ubc6eb859"><a href="https://juejin.cn/post/7328388226966634496?searchId=20240819102036C4930D300FE245106A09" target="_blank" data-lake-id="ua2547b14" id="ua2547b14"><span data-lake-id="u9d636577" id="u9d636577">旧版框架</span></a></p><h3 data-lake-id="YdtWK" id="YdtWK"><span data-lake-id="uea3444a6" id="uea3444a6">js是如何执行的？</span></h3><p data-lake-id="ue4471555" id="ue4471555"><span data-lake-id="u5382627a" id="u5382627a">js在native中运行的方式大概只有两种，</span></p><ol list="uc2c35af4"><li fid="u399c93a9" data-lake-id="u2f6b0d32" id="u2f6b0d32"><span data-lake-id="u31d22e4e" id="u31d22e4e">经编译器转成native代码。</span></li></ol><ul list="u7b1b4961" data-lake-indent="1"><li fid="u06ab5041" data-lake-id="uc8e10015" id="uc8e10015"><span data-lake-id="ub85e1fe0" id="ub85e1fe0">这种方式成本巨高。1.因为每一种语言都有自己特定的api。2.社区的规范等很难去控制。当然fultter是采用的这种方法。</span></li></ul><ol list="u50befc1a"><li fid="u1185602a" data-lake-id="uce0add94" id="uce0add94"><span data-lake-id="ub8eb007c" id="ub8eb007c">js经由js引擎执行，然后采用进程通信的方式调用原生能力。</span></li></ol><ul list="ub73a744e" data-lake-indent="1"><li fid="u82fdea89" data-lake-id="u7af8dafa" id="u7af8dafa"><span data-lake-id="u0e84a792" id="u0e84a792">就是我们常说的bridge的方式。V8本身是一个很好的选择，但是苹果不支持V8。因为V8的JIT Compilation（即时编译）功能会在运行时生成代码，会向内存中写入程序并执行它，而苹果不允许其他软件厂商的软件在苹果手机上使用可写可执行的内存。</span></li><li fid="u82fdea89" data-lake-id="ubcaaa599" id="ubcaaa599"><span data-lake-id="u25bad505" id="u25bad505">所以RN采用苹果的 JavaScriptCore 来解释执行js。ios中JSCore是内置好的，在安卓中需要借助中间层C和 Java/Kotlin 进行通信。</span></li></ul><p data-lake-id="u1c7e3a12" id="u1c7e3a12"><br></p><h3 data-lake-id="VRwIi" id="VRwIi"><span data-lake-id="ubf6d1623" id="ubf6d1623">V8 JIT（即时编译）</span></h3>