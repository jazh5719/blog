<!doctype lake><meta name="doc-version" content="1" /><meta name="viewport" content="adapt" /><ol list="u317a98b2"><li fid="u8de623ad" data-lake-id="ue449ef4f" id="ue449ef4f"><span data-lake-id="ua17c1087" id="ua17c1087">webpack.config.js 引入</span></li></ol><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22hideToolbar%22%3Atrue%2C%22mode%22%3A%22javascript%22%2C%22code%22%3A%22module.exports%20%3D%20%7B%5Cn%20%20%20%20entry%3A%20'.%2Fsrc%2Findex.js'%2C%5Cn%20%20%20%20output%3A%20%7B%5Cn%20%20%20%20%20%20%20%20path%3A%20path.resolve(__dirname%2C%20'dist')%2C%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20plugins%3A%20%5B%5Cn%20%20%20%20%20%20%20%20new%20TestPlugin()%2C%5Cn%20%20%20%20%20%20%20%20new%20AddBannerPlugin(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20banner%3A%20'%E6%88%91%E6%98%AF%E6%B3%A8%E9%87%8A%E5%86%85%E5%AE%B9'%5Cn%20%20%20%20%20%20%20%20%7D)%5Cn%20%20%20%20%5D%5Cn%7D%3B%5Cn%22%2C%22heightLimit%22%3Atrue%2C%22id%22%3A%22NPKdA%22%7D"></card><ol list="u3ea26705"><li fid="u0c332ec8" data-lake-id="u19e4e5cb" id="u19e4e5cb"><span data-lake-id="u17f08d7c" id="u17f08d7c">插件文件</span></li></ol><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22hideToolbar%22%3Atrue%2C%22mode%22%3A%22javascript%22%2C%22code%22%3A%22%2F%2F%20%E6%8F%92%E4%BB%B6%E7%B1%BB%5Cnclass%20AddBannerPlugin%20%7B%5Cn%20%20%20%20%2F%2F%20%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0%5Cn%20%20%20%20constructor(options)%20%7B%5Cn%20%20%20%20%20%20%20%20this.banner%20%3D%20options.banner%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20apply%E6%96%B9%E6%B3%95%5Cn%20%20%20%20apply(compiler)%20%7B%5Cn%20%20%20%20%20%20%20%20compiler.hooks.emit.tapAsync('AddBannerPlugin'%2C%20(compilation%2C%20callback)%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E9%81%8D%E5%8E%86%E6%89%80%E6%9C%89%E7%9A%84%E6%96%87%E4%BB%B6%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20Object.keys(compilation.assets).forEach((filename)%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E4%B8%BA.js%E6%96%87%E4%BB%B6%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(filename.endsWith('.js'))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%8E%B7%E5%8F%96%E6%BA%90%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20source%20%3D%20compilation.assets%5Bfilename%5D.source()%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E6%B7%BB%E5%8A%A0%E6%B3%A8%E9%87%8A%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20newSource%20%3D%20%60%2F*%20%24%7Bthis.banner%7D%20*%2F%5C%5Cn%24%7Bsource%7D%60%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E6%9B%B4%E6%96%B0%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20compilation.assets%5Bfilename%5D%20%3D%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20source%3A%20()%20%3D%3E%20newSource%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20size%3A%20()%20%3D%3E%20newSource.length%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%AE%8C%E6%88%90%E5%A4%84%E7%90%86%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20callback()%3B%5Cn%20%20%20%20%20%20%20%20%7D)%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%5Cnmodule.exports%20%3D%20AddBannerPlugin%3B%5Cn%22%2C%22heightLimit%22%3Atrue%2C%22id%22%3A%22REuqM%22%7D"></card><ol list="u91a94f8b"><li fid="u52141cff" data-lake-id="u32a64707" id="u32a64707"><span data-lake-id="uf98f903f" id="uf98f903f">流程</span></li><li fid="u52141cff" data-lake-id="u4d4fd3e1" id="u4d4fd3e1"><span data-lake-id="u80a75a5c" id="u80a75a5c">webpack首先检查配置文件</span></li><li fid="u52141cff" data-lake-id="u33c8b8c4" id="u33c8b8c4"><span data-lake-id="ua25e5aa4" id="ua25e5aa4">第二步会初始化compiler编译器实例，采用发布订阅的模式将编译的声明周期注册好，并之后初始化各类插件，执行apply将钩子所执行的方法收集。</span></li></ol>