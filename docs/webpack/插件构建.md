1. webpack.config.js 引入
```js
module.exports = {
    entry: './src/index.js',
    output: {
        path: path.resolve(__dirname, 'dist'),
    },
    plugins: [
        new TestPlugin(),
        new AddBannerPlugin({
            banner: '我是注释内容'
        })
    ]
};

```

2. 插件文件
```js
// 插件类
class AddBannerPlugin {
    // 构造函数传递参数
    constructor(options) {
        this.banner = options.banner;
    }

    // apply方法
    apply(compiler) {
        compiler.hooks.emit.tapAsync('AddBannerPlugin', (compilation, callback) => {
            // 遍历所有的文件  
            Object.keys(compilation.assets).forEach((filename) => {
                // 检查是否为.js文件  
                if (filename.endsWith('.js')) {
                    // 获取源文件内容  
                    const source = compilation.assets[filename].source();
                    // 添加注释  
                    const newSource = `/* ${this.banner} */\n${source}`;
                    // 更新文件内容  
                    compilation.assets[filename] = {
                        source: () => newSource,
                        size: () => newSource.length
                    };
                }
            });

            // 完成处理  
            callback();
        });
    }
}

module.exports = AddBannerPlugin;

```

3. 流程
1. webpack首先检查配置文件
2. 第二步会初始化compiler编译器实例，采用发布订阅的模式将编译的声明周期注册好，并之后初始化各类插件，执行apply将钩子所执行的方法收集。